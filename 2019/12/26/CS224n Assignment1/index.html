<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://yoursite.com').hostname,
    root: '/',
    scheme: 'Mist',
    version: '7.6.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":true,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="CS224n Assignment1Pre Import# All Import Statements Defined Here # Note: Do not add to this list. # All the dependencies you need, can be installed by running . # ---------------- import sys assert sy">
<meta property="og:type" content="article">
<meta property="og:title" content="CS224n Assignment1">
<meta property="og:url" content="http://yoursite.com/2019/12/26/CS224n%20Assignment1/index.html">
<meta property="og:site_name" content="SakuyuiのBLOG">
<meta property="og:description" content="CS224n Assignment1Pre Import# All Import Statements Defined Here # Note: Do not add to this list. # All the dependencies you need, can be installed by running . # ---------------- import sys assert sy">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://yoursite.com/2019/12/26/CS224n%20Assignment1/1557206203763.png">
<meta property="og:image" content="http://yoursite.com/2019/12/26/CS224n%20Assignment1/1557207028995.png">
<meta property="og:image" content="http://yoursite.com/2019/12/26/CS224n%20Assignment1/1557209736550.png">
<meta property="og:image" content="http://yoursite.com/2019/12/26/CS224n%20Assignment1/1557216892528.png">
<meta property="article:published_time" content="2019-12-26T12:52:36.442Z">
<meta property="article:modified_time" content="2019-12-26T12:24:14.000Z">
<meta property="article:author" content="Sakuyui39">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/2019/12/26/CS224n%20Assignment1/1557206203763.png">

<link rel="canonical" href="http://yoursite.com/2019/12/26/CS224n%20Assignment1/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>CS224n Assignment1 | SakuyuiのBLOG</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">SakuyuiのBLOG</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-fw fa-sitemap"></i>Sitemap</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="Searching..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/Sakuyui" class="github-corner" title="My github" aria-label="My github" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/26/CS224n%20Assignment1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/tx.jpg">
      <meta itemprop="name" content="Sakuyui39">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SakuyuiのBLOG">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          CS224n Assignment1
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2019-12-26 20:52:36 / Modified: 20:24:14" itemprop="dateCreated datePublished" datetime="2019-12-26T20:52:36+08:00">2019-12-26</time>
            </span>

          
            <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>10k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>9 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="CS224n-Assignment1"><a href="#CS224n-Assignment1" class="headerlink" title="CS224n Assignment1"></a>CS224n Assignment1</h1><h2 id="Pre-Import"><a href="#Pre-Import" class="headerlink" title="Pre Import"></a>Pre Import</h2><pre><code class="lang-python"># All Import Statements Defined Here
# Note: Do not add to this list.
# All the dependencies you need, can be installed by running .
# ----------------
import sys
assert sys.version_info[0]==3
assert sys.version_info[1] &gt;= 5
from gensim.models import KeyedVectors
from gensim.test.utils import datapath
import pprint
import matplotlib.pyplot as plt
plt.rcParams[&#39;figure.figsize&#39;] = [10, 5]
import nltk
nltk.download(&#39;reuters&#39;)
from nltk.corpus import reuters
import numpy as np
import random
import scipy as sp
from sklearn.decomposition import TruncatedSVD
from sklearn.decomposition import PCA
START_TOKEN = &#39;&lt;START&gt;&#39;
END_TOKEN = &#39;&lt;END&gt;&#39;
np.random.seed(0)
random.seed(0)
# ----------------
</code></pre>
<h2 id="Part1-Count-Based-Word-Vectors-10-points-基于计数的词向量-10分"><a href="#Part1-Count-Based-Word-Vectors-10-points-基于计数的词向量-10分" class="headerlink" title="Part1:Count-Based Word Vectors (10 points)(基于计数的词向量 (10分))"></a>Part1:Count-Based Word Vectors (10 points)(基于计数的词向量 (10分))</h2><p>读取google 词向量预训练数据的函数</p>
<pre><code class="lang-python">def read_corpus(category=&quot;crude&quot;):
    &quot;&quot;&quot; Read files from the specified Reuter&#39;s category.
        Params:
            category (string): category name
        Return:
            list of lists, with words from each of the processed files
    &quot;&quot;&quot;
    files = reuters.fileids(category)
    return [[START_TOKEN] + [w.lower() for w in list(reuters.words(f))] + [END_TOKEN] for f in files]
</code></pre>
<h3 id="Question-1-Implement-distinct-words-code-2-points"><a href="#Question-1-Implement-distinct-words-code-2-points" class="headerlink" title="Question 1:Implement distinct_words [code] (2 points)"></a>Question 1:Implement distinct_words [code] (2 points)</h3><p>Write a method to work out the distinct words (word types) that occur in the corpus. You can do this with for loops, but it’s more efficient to do it with Python list comprehensions. In particular, this may be useful to flatten a list of lists. If you’re not familiar with Python list comprehensions in general, here’s more information.</p>
<p>You may find it useful to use Python sets to remove duplicate words.</p>
<blockquote>
<p>就是完成 distinct_words函数，找出一个语料库内不重复的词的集合。可以利用python集合类型完成</p>
</blockquote>
<pre><code class="lang-python">def distinct_words(corpus):
    &quot;&quot;&quot; Determine a list of distinct words for the corpus.
        Params:
            corpus (list of list of strings): corpus of documents
        Return:
            corpus_words (list of strings): list of distinct words across the corpus, sorted (using python &#39;sorted&#39; function)
            num_corpus_words (integer): number of distinct words across the corpus
    &quot;&quot;&quot;
    # ------------------
    # Write your implementation here.
    corpus_words = []
    num_corpus_words = -1

    corpus_words=sorted(list(set(itertools.chain.from_iterable(corpus))))
   # print(corpus_words)
    num_corpus_words=len(corpus_words)

    # ------------------
    return corpus_words, num_corpus_words
</code></pre>
<h3 id="Question-1-2-Implement-compute-co-occurrence-matrix-code-3-points"><a href="#Question-1-2-Implement-compute-co-occurrence-matrix-code-3-points" class="headerlink" title="Question 1.2: Implement compute_co_occurrence_matrix [code] (3 points)"></a>Question 1.2: Implement compute_co_occurrence_matrix [code] (3 points)</h3><p>Write a method that constructs a co-occurrence matrix for a certain window-size  n  (with a default of 4), considering words  n  before and  n  after the word in the center of the window. Here, we start to use numpy (np) to represent vectors, matrices, and tensors. If you’re not familiar with NumPy, there’s a NumPy tutorial in the second half of this cs231n Python NumPy tutorial.</p>
<blockquote>
<p>就是完成计算共现矩阵的函数</p>
</blockquote>
<pre><code class="lang-python">def compute_co_occurrence_matrix(corpus, window_size=4):
    &quot;&quot;&quot; Compute co-occurrence matrix for the given corpus and window_size (default of 4).

        Note: Each word in a document should be at the center of a window. Words near edges will have a smaller
              number of co-occurring words.

              For example, if we take the document &quot;START All that glitters is not gold END&quot; with window size of 4,
              &quot;All&quot; will co-occur with &quot;START&quot;, &quot;that&quot;, &quot;glitters&quot;, &quot;is&quot;, and &quot;not&quot;.

        Params:
            corpus (list of list of strings): corpus of documents
            window_size (int): size of context window
        Return:
            M (numpy matrix of shape (number of corpus words, number of corpus words)):
                Co-occurence matrix of word counts.
                The ordering of the words in the rows/columns should be the same as the ordering of the words given by the distinct_words function.
            word2Ind (dict): dictionary that maps word to index (i.e. row/column number) for matrix M.
    &quot;&quot;&quot;

    words, num_words = distinct_words(corpus)
    M = None
    word2Ind = {}

    # ------------------
    # Write your implementation here.
    i=0
    for v_c in words:
        #print(v_c,num_words)
        word2Ind.update({v_c: i})
        i=i+1

    M=np.zeros((num_words,num_words))
    for str in corpus:
        for i_v_c in range(len(str)):
            for i_c_o in range(window_size):
                # print(i_c_o)
                if (i_v_c - i_c_o - 1 &gt;= 0):
                    # print(str[i_v_c])
                    M[word2Ind[str[i_v_c]]][word2Ind[str[i_v_c - i_c_o - 1]]] = M[word2Ind[str[i_v_c]]][word2Ind[
                        str[i_v_c - i_c_o - 1]]] + 1
                if (i_v_c + i_c_o + 1 &lt; len(str)):
                    # print(str[i_v_c])
                    M[word2Ind[str[i_v_c]]][word2Ind[str[i_v_c + i_c_o + 1]]] = M[word2Ind[str[i_v_c]]][word2Ind[
                        str[i_v_c + i_c_o + 1]]] + 1
    #print(word2Ind)
    #M=np.matrix([num_words,num_words])

    return M, word2Ind
</code></pre>
<h3 id="Question-1-3-Implement-reduce-to-k-dim-code-1-point"><a href="#Question-1-3-Implement-reduce-to-k-dim-code-1-point" class="headerlink" title="Question 1.3: Implement reduce_to_k_dim [code] (1 point)"></a>Question 1.3: Implement reduce_to_k_dim [code] (1 point)</h3><p>Construct a method that performs dimensionality reduction on the matrix to produce k-dimensional embeddings. Use SVD to take the top k components and produce a new matrix of k-dimensional embeddings.</p>
<p>Note: All of numpy, scipy, and scikit-learn (sklearn) provide some implementation of SVD, but only scipy and sklearn provide an implementation of Truncated SVD, and only sklearn provides an efficient randomized algorithm for calculating large-scale Truncated SVD. So please use sklearn.decomposition.TruncatedSVD.</p>
<blockquote>
<p>完成SVD降维函数。要求用sklearn提供的svd函数。所以很简单，直接调用就行<br>``` python<br>def reduce_to_k_dim(M, k=2):<br>    “”” Reduce a co-occurence count matrix of dimensionality (num_corpus_words, num_corpus_words)<br>        to a matrix of dimensionality (num_corpus_words, k) using the following SVD function from Scikit-Learn:</p>
<pre><code>        - http://scikit-learn.org/stable/modules/generated/sklearn.decomposition.TruncatedSVD.html
</code></pre></blockquote>
<pre><code>    Params:
        M (numpy matrix of shape (number of corpus words, number of corpus words)): co-occurence matrix of word counts
        k (int): embedding size of each word after dimension reduction
    Return:
        M_reduced (numpy matrix of shape (number of corpus words, k)): matrix of k-dimensioal word embeddings.
                In terms of the SVD from math class, this actually returns U * S
&quot;&quot;&quot;    
n_iters = 10     # Use this parameter in your call to `TruncatedSVD`
M_reduced = None
print(&quot;Running Truncated SVD over %i words...&quot; % (M.shape[0]))

    # ------------------
    # Write your implementation here.
    pca=PCA(n_components=k)
    M_reduced = pca.fit_transform(M)

    # ------------------
print(&quot;Done.&quot;)
return M_reduced
</code></pre><pre><code>

###Question 1.4: Implement plot_embeddings [code] (1 point)
Here you will write a function to plot a set of 2D vectors in 2D space. For graphs, we will use Matplotlib (plt).

For this example, you may find it useful to adapt this code. In the future, a good way to make a plot is to look at the Matplotlib gallery, find a plot that looks somewhat like what you want, and adapt the code they give.

&gt;也就是根据指定的词和降维到2维后的词向量矩阵，进行绘制2D图像
``` python
def plot_embeddings(M_reduced, word2Ind, words):
    &quot;&quot;&quot; Plot in a scatterplot the embeddings of the words specified in the list &quot;words&quot;.
        NOTE: do not plot all the words listed in M_reduced / word2Ind.
        Include a label next to each point.

        Params:
            M_reduced (numpy matrix of shape (number of unique words in the corpus , k)): matrix of k-dimensioal word embeddings
            word2Ind (dict): dictionary that maps word to indices for matrix M
            words (list of strings): words whose embeddings we want to visualize
    &quot;&quot;&quot;

    # ------------------
    # Write your implementation here.
    i=0
    print(words)
    print(M_reduced)
    for x in words:
        plt.scatter(M_reduced[word2Ind[x]][0],M_reduced[word2Ind[x]][1],marker=&#39;x&#39;,c=&#39;r&#39;,)
        plt.annotate(x, xy=(M_reduced[word2Ind[x]][0],M_reduced[word2Ind[x]][1]), xytext=(M_reduced[word2Ind[x]][0],M_reduced[word2Ind[x]][1]))
        i=i+1
    plt.show()
    # ------------------
</code></pre><p><img src="./1557206203763.png" alt="Alt text"></p>
<h3 id="Question-1-5-Co-Occurrence-Plot-Analysis-written-3-points"><a href="#Question-1-5-Co-Occurrence-Plot-Analysis-written-3-points" class="headerlink" title="Question 1.5: Co-Occurrence Plot Analysis [written] (3 points)"></a>Question 1.5: Co-Occurrence Plot Analysis [written] (3 points)</h3><p>Now we will put together all the parts you have written! We will compute the co-occurrence matrix with fixed window of 4, over the Reuters “crude” corpus. Then we will use TruncatedSVD to compute 2-dimensional embeddings of each word. TruncatedSVD returns U*S, so we normalize the returned vectors, so that all the vectors will appear around the unit circle (therefore closeness is directional closeness). Note: The line of code below that does the normalizing uses the NumPy concept of broadcasting. If you don’t know about broadcasting, check out Computation on Arrays: Broadcasting by Jake VanderPlas.</p>
<p>Run the below cell to produce the plot. It’ll probably take a few seconds to run. What clusters together in 2-dimensional embedding space? What doesn’t cluster together that you might think should have? Note: “bpd” stands for “barrels per day” and is a commonly used abbreviation in crude oil topic articles.</p>
<blockquote>
<p>就是对真正的语料库结果进行分析。直接运行贴结果就行</p>
</blockquote>
<pre><code class="lang-python"># -----------------------------------------------------------------
# Run Cell to Reduce 300-Dimensinal Word Embeddings to k Dimensions
# Note: This may take several minutes
# -----------------------------------------------------------------

# -----------------------------------
# Run Cell to Load Word Vectors
# Note: This may take several minutes
# -----------------------------------
wv_from_bin = load_word2vec()
M, word2Ind = get_matrix_of_vectors(wv_from_bin)
M_reduced = reduce_to_k_dim(M, k=2)
words = [&#39;barrels&#39;, &#39;bpd&#39;, &#39;ecuador&#39;, &#39;energy&#39;, &#39;industry&#39;, &#39;kuwait&#39;, &#39;oil&#39;, &#39;output&#39;, &#39;petroleum&#39;, &#39;venezuela&#39;]
plot_embeddings(M_reduced, word2Ind, words)
</code></pre>
<p><img src="./1557207028995.png" alt="Alt text"></p>
<h2 id="Part-2-Prediction-Based-Word-Vectors-15-points-基于预测的词向量-15分"><a href="#Part-2-Prediction-Based-Word-Vectors-15-points-基于预测的词向量-15分" class="headerlink" title="Part 2: Prediction-Based Word Vectors (15 points)(基于预测的词向量(15分))"></a>Part 2: Prediction-Based Word Vectors (15 points)(基于预测的词向量(15分))</h2><h3 id="Reducing-dimensionality-of-Word2Vec-Word-Embeddings"><a href="#Reducing-dimensionality-of-Word2Vec-Word-Embeddings" class="headerlink" title="Reducing dimensionality of Word2Vec Word Embeddings"></a>Reducing dimensionality of Word2Vec Word Embeddings</h3><blockquote>
<p>Let’s directly compare the word2vec embeddings to those of the co-occurrence matrix. Run the following cells to:<br>Put the 3 million word2vec vectors into a matrix M<br>Run reduce_to_k_dim (your Truncated SVD function) to reduce the vectors from 300-dimensional to 2-dimensional.<br>```<br>def get_matrix_of_vectors(wv_from_bin, required_words=[‘barrels’, ‘bpd’, ‘ecuador’, ‘energy’, ‘industry’, ‘kuwait’, ‘oil’, ‘output’, ‘petroleum’, ‘venezuela’]):<br>    “”” Put the word2vec vectors into a matrix M.<br>        Param:<br>            wv_from_bin: KeyedVectors object; the 3 million word2vec vectors loaded from file<br>        Return:<br>            M: numpy matrix shape (num words, 300) containing the vectors<br>            word2Ind: dictionary mapping each word to its row number in M<br>    “””<br>    import random<br>    words = list(wv_from_bin.vocab.keys())<br>    print(“Shuffling words …”)<br>    random.shuffle(words)<br>    words = words[:10000]<br>    print(“Putting %i words into word2Ind and matrix M…” % len(words))<br>    word2Ind = {}<br>    M = []<br>    curInd = 0<br>    for w in words:<br>        try:<br>            M.append(wv_from_bin.word_vec(w))<br>            word2Ind[w] = curInd<br>            curInd += 1<br>        except KeyError:<br>            continue<br>    for w in required_words:<br>        try:<br>            M.append(wv_from_bin.word_vec(w))<br>            word2Ind[w] = curInd<br>            curInd += 1<br>        except KeyError:<br>            continue<br>    M = np.stack(M)<br>    print(“Done.”)<br>    return M, word2Ind</p>
</blockquote>
<h1 id="————————————————————————————————"><a href="#————————————————————————————————" class="headerlink" title="————————————————————————————————-"></a>————————————————————————————————-</h1><h1 id="Run-Cell-to-Reduce-300-Dimensinal-Word-Embeddings-to-k-Dimensions"><a href="#Run-Cell-to-Reduce-300-Dimensinal-Word-Embeddings-to-k-Dimensions" class="headerlink" title="Run Cell to Reduce 300-Dimensinal Word Embeddings to k Dimensions"></a>Run Cell to Reduce 300-Dimensinal Word Embeddings to k Dimensions</h1><h1 id="Note-This-may-take-several-minutes"><a href="#Note-This-may-take-several-minutes" class="headerlink" title="Note: This may take several minutes"></a>Note: This may take several minutes</h1><h1 id="————————————————————————————————-1"><a href="#————————————————————————————————-1" class="headerlink" title="————————————————————————————————-"></a>————————————————————————————————-</h1><p>M, word2Ind = get_matrix_of_vectors(wv_from_bin)<br>M_reduced = reduce_to_k_dim(M, k=2)</p>
<pre><code>
###Question 2.1: Word2Vec Plot Analysis [written] (4 points)(词向量绘制解析)
![Alt text](./1557207564892.png)

###Question 2.2: Polysemous Words (2 points) [code + written] (近义词检索)
``` python
wv_from_bin.most_similar(positive=[&quot;woman&quot;,&quot;king&quot;],negative=[&quot;man&quot;],topn=10)
wv_from_bin.most_similar(positive=[&quot;remove&quot;],topn=10)
</code></pre><p><img src="./1557209736550.png" alt="Alt text"></p>
<h3 id="Question-2-3-Synonyms-amp-Antonyms-2-points-code-written"><a href="#Question-2-3-Synonyms-amp-Antonyms-2-points-code-written" class="headerlink" title="Question 2.3: Synonyms &amp; Antonyms (2 points) [code + written]"></a>Question 2.3: Synonyms &amp; Antonyms (2 points) [code + written]</h3><p><img src="./1557216892528.png" alt="Alt text"></p>
<h3 id="Question-2-4-Finding-Analogies-code-written-2-Points"><a href="#Question-2-4-Finding-Analogies-code-written-2-Points" class="headerlink" title="Question 2.4: Finding Analogies [code + written] (2 Points)"></a>Question 2.4: Finding Analogies [code + written] (2 Points)</h3><pre><code class="lang-python">wv_from_bin.most_similar(positive=[&quot;woman&quot;,&quot;king&quot;],negative=[&quot;man&quot;],topn=10)
</code></pre>

    </div>

    
    
    
<div>
  
    <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------End of this passage-------------</div>
    
</div>
  
</div>
      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2019/12/26/Computer%20Network%E2%80%94%E2%80%94Review%20From%20Keywords/" rel="prev" title="Computer Network——Review From Keywords">
      <i class="fa fa-chevron-left"></i> Computer Network——Review From Keywords
    </a></div>
      <div class="post-nav-item">
    <a href="/2019/12/26/CS224N-NLP%20Assignment%20individual%20solution/" rel="next" title="CS224N-NLP Assignment individual solution">
      CS224N-NLP Assignment individual solution <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#CS224n-Assignment1"><span class="nav-number">1.</span> <span class="nav-text">CS224n Assignment1</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Pre-Import"><span class="nav-number">1.1.</span> <span class="nav-text">Pre Import</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Part1-Count-Based-Word-Vectors-10-points-基于计数的词向量-10分"><span class="nav-number">1.2.</span> <span class="nav-text">Part1:Count-Based Word Vectors (10 points)(基于计数的词向量 (10分))</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Question-1-Implement-distinct-words-code-2-points"><span class="nav-number">1.2.1.</span> <span class="nav-text">Question 1:Implement distinct_words [code] (2 points)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Question-1-2-Implement-compute-co-occurrence-matrix-code-3-points"><span class="nav-number">1.2.2.</span> <span class="nav-text">Question 1.2: Implement compute_co_occurrence_matrix [code] (3 points)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Question-1-3-Implement-reduce-to-k-dim-code-1-point"><span class="nav-number">1.2.3.</span> <span class="nav-text">Question 1.3: Implement reduce_to_k_dim [code] (1 point)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Question-1-5-Co-Occurrence-Plot-Analysis-written-3-points"><span class="nav-number">1.2.4.</span> <span class="nav-text">Question 1.5: Co-Occurrence Plot Analysis [written] (3 points)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Part-2-Prediction-Based-Word-Vectors-15-points-基于预测的词向量-15分"><span class="nav-number">1.3.</span> <span class="nav-text">Part 2: Prediction-Based Word Vectors (15 points)(基于预测的词向量(15分))</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Reducing-dimensionality-of-Word2Vec-Word-Embeddings"><span class="nav-number">1.3.1.</span> <span class="nav-text">Reducing dimensionality of Word2Vec Word Embeddings</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#————————————————————————————————"><span class="nav-number">2.</span> <span class="nav-text">————————————————————————————————-</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Run-Cell-to-Reduce-300-Dimensinal-Word-Embeddings-to-k-Dimensions"><span class="nav-number">3.</span> <span class="nav-text">Run Cell to Reduce 300-Dimensinal Word Embeddings to k Dimensions</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Note-This-may-take-several-minutes"><span class="nav-number">4.</span> <span class="nav-text">Note: This may take several minutes</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#————————————————————————————————-1"><span class="nav-number">5.</span> <span class="nav-text">————————————————————————————————-</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Question-2-3-Synonyms-amp-Antonyms-2-points-code-written"><span class="nav-number">5.0.1.</span> <span class="nav-text">Question 2.3: Synonyms &amp; Antonyms (2 points) [code + written]</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Question-2-4-Finding-Analogies-code-written-2-Points"><span class="nav-number">5.0.2.</span> <span class="nav-text">Question 2.4: Finding Analogies [code + written] (2 Points)</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Sakuyui39"
      src="/images/tx.jpg">
  <p class="site-author-name" itemprop="name">Sakuyui39</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">75</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Sakuyui" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Sakuyui" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:microyui39@yahoo.co.jp" title="E-Mail → mailto:microyui39@yahoo.co.jp" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/bkyh/" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;bkyh&#x2F;" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/microice17" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;microice17" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.instagram.com/sakuyui39/" title="Instagram → https:&#x2F;&#x2F;www.instagram.com&#x2F;sakuyui39&#x2F;" rel="noopener" target="_blank"><i class="fa fa-fw fa-instagram"></i>Instagram</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 2018 – 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sakuyui39</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="Symbols count total">309k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">4:41</span>
</div>
  <div class="theme-info">Theme – <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.6.0
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='240' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>

<!-- ҳ����С���� -->
<script type="text/javascript" src="/js/src/clicklove.js"></script>